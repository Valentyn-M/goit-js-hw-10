{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\n\nlet userSelectedDate;\nconst datetimeBtn = document.querySelector('.datetime-btn');\n\nconst flatpickrOptions = {\n\tenableTime: true,\n\ttime_24hr: true,\n\tdefaultDate: new Date(),\n\tminuteIncrement: 1,\n\tonClose(selectedDates) {\n\t\tuserSelectedDate = selectedDates[0];\n\t\tconst currentDate = checkDate(); // get current date from function checkDate() at the moment of choosing the date\n\t\tif (checkDate) {\n\t\t\tdatetimeBtn.addEventListener(\"click\", () => startTimer(currentDate));\n\t\t}\n\t},\n};\n\nconst iziToastOptions = {\n\ttitle: \"Error\",\n\ttitleColor: '#fff',\n\ttitleSize: \"16px\",\n\ttitleLineHeight: \"1.5\",\n\tmessage: \"Illegal operation\",\n\tbackgroundColor: \"#ef4040\",\n\tcolor: \"white\",\n\tmessageColor: \"#fff\",\n\tmessageSize: \"16px\",\n\tmessageLineHeight: \"1.5\",\n\ticonUrl: new URL('../img/error.svg', import.meta.url).href,\n\ticonColor: \"#fff\",\n\tclose: true,\n\tcloseOnEscape: true,\n\tprogressBarColor: \"#b51b1b\",\n\tposition: \"topRight\",\n\ttimeout: 5000,\n\tanimateInside: false,\n\ttransitionIn: \"bounceInLeft\"\n};\n\nflatpickr(\"#datetime-picker\", flatpickrOptions);\n\nfunction checkDate() {\n\tconst currentDate = new Date();\n\tif (userSelectedDate <= currentDate) {\n\t\tdatetimeBtn.setAttribute(\"disabled\", \"disabled\");\n\t\tiziToast.show(iziToastOptions);\n\t\treturn false;\n\t} else {\n\t\tdatetimeBtn.removeAttribute(\"disabled\");\n\t\treturn currentDate;\n\t}\n}\n\nfunction startTimer(currentDate) {\n\tconst timeTimer = userSelectedDate - currentDate;\n\n\tconst secondsEl = document.querySelector(\"[data-seconds]\");\n\tconst minutesEl = document.querySelector(\"[data-minutes]\");\n\tconst hoursEl = document.querySelector(\"[data-hours]\");\n\tconst daysEl = document.querySelector(\"[data-days]\");\n\n\tlet timeLeft = timeTimer;\n\tsetDate();\n\tconst datetimeInput = document.querySelector('.datetime-input');\n\tdatetimeInput.setAttribute(\"disabled\", \"disabled\");\n\tdatetimeBtn.setAttribute(\"disabled\", \"disabled\");\n\n\tconst timer = setInterval(() => {\n\t\ttimeLeft -= 1000;\n\t\tif (timeLeft <= 0) {\n\t\t\tclearInterval(timer);\n\t\t\tsecondsEl.textContent = \"00\";\n\t\t\tminutesEl.textContent = \"00\";\n\t\t\thoursEl.textContent = \"00\";\n\t\t\tdaysEl.textContent = \"00\";\n\t\t\tdatetimeInput.removeAttribute(\"disabled\");\n\t\t} else {\n\t\t\tsetDate();\n\t\t}\n\t}, 1000);\n\n\tfunction setDate() {\n\t\tconst timeTimerObject = convertMs(timeLeft);\n\t\tconst { days, hours, minutes, seconds } = timeTimerObject;\n\t\tsecondsEl.textContent = seconds;\n\t\tminutesEl.textContent = minutes;\n\t\thoursEl.textContent = hours;\n\t\tdaysEl.textContent = days;\n\t}\n}\n\nfunction convertMs(ms) {\n\t// Number of milliseconds per unit of time\n\tconst second = 1000;\n\tconst minute = second * 60;\n\tconst hour = minute * 60;\n\tconst day = hour * 24;\n\n\t// Remaining days\n\tconst days = String(Math.floor(ms / day)).padStart(2, \"0\");\n\t// Remaining hours\n\tconst hours = String(Math.floor((ms % day) / hour)).padStart(2, \"0\");\n\t// Remaining minutes\n\tconst minutes = String(Math.floor(((ms % day) % hour) / minute)).padStart(2, \"0\");\n\t// Remaining seconds\n\tconst seconds = String(Math.floor((((ms % day) % hour) % minute) / second)).padStart(2, \"0\");\n\n\treturn { days, hours, minutes, seconds };\n}\n"],"names":["userSelectedDate","datetimeBtn","flatpickrOptions","selectedDates","currentDate","checkDate","startTimer","iziToastOptions","flatpickr","iziToast","timeTimer","secondsEl","minutesEl","hoursEl","daysEl","timeLeft","setDate","datetimeInput","timer","timeTimerObject","convertMs","days","hours","minutes","seconds","ms"],"mappings":"+IAGA,IAAIA,EACJ,MAAMC,EAAc,SAAS,cAAc,eAAe,EAEpDC,EAAmB,CACxB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACtBH,EAAmBG,EAAc,CAAC,EAClC,MAAMC,EAAcC,IAChBA,GACHJ,EAAY,iBAAiB,QAAS,IAAMK,EAAWF,CAAW,CAAC,CAEpE,CACF,EAEMG,EAAkB,CACvB,MAAO,QACP,WAAY,OACZ,UAAW,OACX,gBAAiB,MACjB,QAAS,oBACT,gBAAiB,UACjB,MAAO,QACP,aAAc,OACd,YAAa,OACb,kBAAmB,MACnB,QAAS,IAA4C,IAAA,q3FAAA,YAAA,GAAA,EAAC,KACtD,UAAW,OACX,MAAO,GACP,cAAe,GACf,iBAAkB,UAClB,SAAU,WACV,QAAS,IACT,cAAe,GACf,aAAc,cACf,EAEAC,EAAU,mBAAoBN,CAAgB,EAE9C,SAASG,GAAY,CACpB,MAAMD,EAAc,IAAI,KACxB,OAAIJ,GAAoBI,GACvBH,EAAY,aAAa,WAAY,UAAU,EAC/CQ,EAAS,KAAKF,CAAe,EACtB,KAEPN,EAAY,gBAAgB,UAAU,EAC/BG,EAET,CAEA,SAASE,EAAWF,EAAa,CAChC,MAAMM,EAAYV,EAAmBI,EAE/BO,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAS,SAAS,cAAc,aAAa,EAEnD,IAAIC,EAAWL,EACfM,IACA,MAAMC,EAAgB,SAAS,cAAc,iBAAiB,EAC9DA,EAAc,aAAa,WAAY,UAAU,EACjDhB,EAAY,aAAa,WAAY,UAAU,EAE/C,MAAMiB,EAAQ,YAAY,IAAM,CAC/BH,GAAY,IACRA,GAAY,GACf,cAAcG,CAAK,EACnBP,EAAU,YAAc,KACxBC,EAAU,YAAc,KACxBC,EAAQ,YAAc,KACtBC,EAAO,YAAc,KACrBG,EAAc,gBAAgB,UAAU,GAExCD,GAED,EAAE,GAAI,EAEP,SAASA,GAAU,CAClB,MAAMG,EAAkBC,EAAUL,CAAQ,EACpC,CAAE,KAAAM,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKL,EAC1CR,EAAU,YAAca,EACxBZ,EAAU,YAAcW,EACxBV,EAAQ,YAAcS,EACtBR,EAAO,YAAcO,CACrB,CACF,CAEA,SAASD,EAAUK,EAAI,CAQtB,MAAMJ,EAAO,OAAO,KAAK,MAAMI,EAAK,KAAG,CAAC,EAAE,SAAS,EAAG,GAAG,EAEnDH,EAAQ,OAAO,KAAK,MAAOG,EAAK,MAAO,IAAI,CAAC,EAAE,SAAS,EAAG,GAAG,EAE7DF,EAAU,OAAO,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,CAAC,EAAE,SAAS,EAAG,GAAG,EAE1ED,EAAU,OAAO,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAAE,SAAS,EAAG,GAAG,EAE3F,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC"}